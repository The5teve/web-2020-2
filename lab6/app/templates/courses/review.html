{% macro show_reviews(course_id, current_user, comments, own_review) %}

{% if current_user.is_authenticated %}
{% if not own_review %}
<form class="w-100" method="POST" action="{{ url_for('courses.show', course_id=course_id) }}">
    <h3>Оставить комментарий</h3>
    <div class="form-group">
        <textarea class="form-control" name="text"  cols="20" rows="3"></textarea>
    </div>
    <input type="hidden" name="user_id" value="{{ current_user.id }}">
    <input type="hidden" name="course_id" value="{{ course_id }}">
    <div class="form-group">
        <label for="exampleFormControlSelect1">Оценка курса</label>
        <select class="form-control" id="exampleFormControlSelect1" name="rating">
          <option selected value="5">Отлично</option>
          <option value="4">Хорошо</option>
          <option value="3">Удовлетворительно</option>
          <option value="2"> Неудовлетворительно</option>
          <option value="1">Плохо</option>
          <option value="0">Ужасно</option>
        </select>
      </div>
    <div class="form-group text-right">
        <input class="btn btn-primary" type="submit" value="Оставить комментарий">
    </div>

</form> 
{% else %}
<div class='border border-success rounded p-2 my-2'>
    <h3> Ваш комментарий </h3>
    <div class="media my-4">

        <a class="pull-left ml-5" href="#"><img class="img-fluid rounded-circle cursor-pointer comments ml-5" style="width: 60%; height: 80%;"
            src="{{ url_for('static', filename='images/default-profile-picture-300x300.jpeg') }}" alt="profile-pic"> </a>
        <div class="media-body my-auto">
            <h4 class="media-heading">{{own_review.user.full_name}} </h4>
            <ul class="list-unstyled list-inline media-detail pull-right">
                <h6 class="">
                    {% for i in range(0,own_review.rating)%}
                    <span>★</span>
                    {% endfor %}
                    {% for i in range(0,5-own_review.rating)%}
                    <span>☆</span>   
                    {% endfor %}
                    <span > {{own_review.rating}}/5 </span>
                </h6>
            </ul>
            <p>{{own_review.text}}</p>
            <ul class="list-unstyled list-inline media-detail pull-left">
                <li></i>{{own_review.created_at}}</li>
            </ul>

        </div>
    </div>
</div>
{% endif%}
{% endif %}
{% for comm in comments%}
{% if comm.id != own_review.id %}
<div class="media my-4">
    <a class="pull-left ml-5" href="#"><img class="img-fluid rounded-circle cursor-pointer comments ml-5" style="width: 60%;"
        src="{{ url_for('static', filename='images/default-profile-picture-300x300.jpeg') }}" alt="profile-pic"> </a>
    <div class="media-body my-auto">
        <h4 class="media-heading">{{comm.user.full_name}} </h4>
        <ul class="list-unstyled list-inline media-detail pull-right">
            <h6 class="">
                {% for i in range(0,comm.rating)%}
                <span>★</span>
                {% endfor %}
                {% for i in range(0,5-comm.rating)%}
                <span>☆</span>
                {% endfor %}
                <span > {{comm.rating}}/5 </span>
            </h6>
        </ul>
        <p>{{comm.text}}</p>
        <ul class="list-unstyled list-inline media-detail pull-left">
            <li></i>{{comm.created_at}}</li>
        </ul>

    </div>
</div>
{% endif %}
{% endfor %}
{% endmacro %}

